<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>input-selector</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="GStreamer Bad Plugins 0.10 Plugins Reference Manual">
<link rel="up" href="ch01.html" title="gst-plugins-bad Elements">
<link rel="prev" href="gst-plugins-bad-plugins-gstrtpssrcdemux.html" title="gstrtpssrcdemux">
<link rel="next" href="gst-plugins-bad-plugins-ivorbisdec.html" title="ivorbisdec">
<meta name="generator" content="GTK-Doc V1.8 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch01.html" title="gst-plugins-bad Elements">
<link rel="chapter" href="ch02.html" title="gst-plugins-bad Plugins">
<link rel="chapter" href="ch03.html" title="gst-plugins-bad Classes">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="gst-plugins-bad-plugins-gstrtpssrcdemux.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer Bad Plugins 0.10 Plugins Reference Manual</th>
<td><a accesskey="n" href="gst-plugins-bad-plugins-ivorbisdec.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2630139" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2566901" class="shortcut">Description</a>
                  &#160;|&#160;
                  <a href="#id2630101" class="shortcut">Properties</a>
                  &#160;|&#160;
                  <a href="#id2630080" class="shortcut">Signals</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="gst-plugins-bad-plugins-input-selector"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2630139"></a><span class="refentrytitle">input-selector</span>
</h2>
<p>input-selector &#8212; N-to-1 stream selectoring</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">



                    <a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector">GstInputSelector</a>;

</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2630101"></a><h2>Properties</h2>
<pre class="synopsis">

  "<a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector--active-pad">active-pad</a>"               gchar*                : Read / Write
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2630080"></a><h2>Signals</h2>
<pre class="synopsis">

  "<a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector-block">block</a>"                                          : Run Last
  "<a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector-switch">switch</a>"                                         : Run Last
</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2566901"></a><h2>Description</h2>
<p>
Direct one out of N input streams to the output pad.</p>
<div class="refsect2" lang="en">
<a name="id2571037"></a><h3>Element Information</h3>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term">plugin</span></td>
<td>
          <a href="gst-plugins-bad-plugins-plugin-selector.html#plugin-selector">selector</a>
        </td>
</tr>
<tr>
<td><span class="term">author</span></td>
<td>Julien Moutte &lt;julien@moutte.net&gt;012Ronald S. Bultje &lt;rbultje@ronald.bitfreak.net&gt;012Jan Schmidt &lt;thaytan@mad.scientist.com&gt;012Wim Taymans &lt;wim.taymans@gmail.com&gt;</td>
</tr>
<tr>
<td><span class="term">class</span></td>
<td>Generic</td>
</tr>
</tbody>
</table></div>
<h3>Element Pads</h3>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term">name</span></td>
<td>src</td>
</tr>
<tr>
<td><span class="term">direction</span></td>
<td>source</td>
</tr>
<tr>
<td><span class="term">presence</span></td>
<td>always</td>
</tr>
<tr>
<td><span class="term">details</span></td>
<td>ANY</td>
</tr>
</tbody>
</table></div>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term">name</span></td>
<td>sink%d</td>
</tr>
<tr>
<td><span class="term">direction</span></td>
<td>sink</td>
</tr>
<tr>
<td><span class="term">presence</span></td>
<td>request</td>
</tr>
<tr>
<td><span class="term">details</span></td>
<td>ANY</td>
</tr>
</tbody>
</table></div>
</div>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2559486"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2559497"></a><h3>
<a name="GstInputSelector"></a>GstInputSelector</h3>
<a class="indexterm" name="id2559509"></a><pre class="programlisting">typedef struct {
  GstElement element;

  GstPad *srcpad;

  GstPad *active_sinkpad;
  guint nb_sinkpads;

  GstSegment segment;

  GCond *blocked_cond;
  gboolean blocked;
  gboolean pending_stop;
  GstSegment pending_stop_segment;
} GstInputSelector;
</pre>
<p>

</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2559530"></a><h2>Property Details</h2>
<div class="refsect2" lang="en">
<a name="id2559541"></a><h3>
<a name="GstInputSelector--active-pad"></a>The "<code class="literal">active-pad</code>" property</h3>
<a class="indexterm" name="id2559555"></a><pre class="programlisting">  "active-pad"               gchar*                : Read / Write</pre>
<p>Name of the currently active sink pad.</p>
<p>Default value: NULL</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2559581"></a><h2>Signal Details</h2>
<div class="refsect2" lang="en">
<a name="id2559592"></a><h3>
<a name="GstInputSelector-block"></a>The "block" signal</h3>
<a class="indexterm" name="id2559600"></a><pre class="programlisting">gint64              user_function                      (<a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector">GstInputSelector</a> *inputselector,
                                                        gpointer          user_data)          : Run Last</pre>
<p>
Block all sink pads in preparation for a switch. Returns the stop time of
the current switch segment, as a running time, or 0 if there is no current
active pad or the current active pad never received data.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>inputselector</code></em>&#160;:</span></td>
<td> the <a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector"><span class="type">GstInputSelector</span></a>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2625449"></a><h3>
<a name="GstInputSelector-switch"></a>The "switch" signal</h3>
<a class="indexterm" name="id2625457"></a><pre class="programlisting">void                user_function                      (<a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector">GstInputSelector</a> *inputselector,
                                                        gchar            *pad,
                                                        gint64            stop_time,
                                                        gint64            start_time,
                                                        gpointer          user_data)          : Run Last</pre>
<p>
Switch to a new feed. The segment opened by the previously active pad, if
any, will be closed, and a new segment opened before data flows again.
</p>
<p>
This signal must be emitted when the element has been blocked via the <a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector-block">block</a> signal.
</p>
<p>
If you have a stream with only one switch element, such as an audio-only
stream, a stream switch should be performed by first emitting the block
signal, and then emitting the switch signal with -1 for the stop and start
time values.
</p>
<p>
The intention of the <em class="parameter"><code>stop_time</code></em> and <em class="parameter"><code>start_time</code></em> arguments is to allow
multiple switch elements to switch and maintain stream synchronization.
When switching a stream with multiple feeds, you will need as many switch
elements as you have feeds. For example, a feed with audio and video will
have one switch element between the audio feeds and one for video.
</p>
<p>
A switch over multiple switch elements should be performed as follows:
First, emit the <a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector-block">block</a>
signal, collecting the returned values. The maximum running time returned
by block should then be used as the time at which to close the previous
segment.
</p>
<p>
Then, query the running times of the new audio and video pads that you will
switch to. Naturally, these pads are on separate switch elements. Take the
minimum running time for those streams and use it for the time at which to
open the new segment.
</p>
<p>
If <em class="parameter"><code>pad</code></em> is the same as the current active pad, the element will cancel any
previous block without adjusting segments.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>inputselector</code></em>&#160;:</span></td>
<td> the <a href="gst-plugins-bad-plugins-input-selector.html#GstInputSelector"><span class="type">GstInputSelector</span></a>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>pad</code></em>&#160;:</span></td>
<td>            name of pad to switch to
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>stop_time</code></em>&#160;:</span></td>
<td>      running time at which to close the previous segment, or -1
                 to use the running time of the previously active sink pad
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>start_time</code></em>&#160;:</span></td>
<td>     running time at which to start the new segment, or -1 to
                 use the running time of the newly active sink pad
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2628676"></a><h2>See Also</h2>
<a href="gst-plugins-bad-plugins-output-selector.html#GstOutputSelector"><span class="type">GstOutputSelector</span></a>
</div>
</div>
</body>
</html>
